import{a as S,b as w}from"./chunk-XDFNKGBV.js";import{e as y}from"./chunk-WDW6KDBE.js";import{K as a,L as h,M as m,R as p,Wa as f,X as d,bb as u,hb as _,ob as v,s as l,vb as C,xb as g}from"./chunk-STQM5VJK.js";var b=(()=>{class o{get rows(){return this._healthpatientService.healthpatients}constructor(r,i,e,n,s){this._translate=r,this._healthpatientService=i,this._alert=e,this._form=n,this._core=s,this.columns=["name","description","dateOfBirth","gender","category","phone","email","address"],this.form=this._form.getForm("healthpatient",S),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(t,c)=>{this._preCreate(t),this._healthpatientService.create(t),c()}})},update:t=>{this._form.modal(this.form,[],t).then(c=>{this._core.copy(c,t),this._healthpatientService.update(t)})},delete:t=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this healthpatient?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._healthpatientService.delete(t)}}]})},buttons:[{icon:"assignment",hrefFunc:t=>"/records/"+t._id},{icon:"sick",hrefFunc:t=>"/diseases/"+t._id},{icon:"medication",hrefFunc:t=>"/treatment/"+t._id},{icon:"analytics",hrefFunc:t=>"/analysis/"+t._id},{icon:"mood_bad",hrefFunc:t=>"/symptoms/"+t._id},{icon:"cloud_download",click:t=>{this._form.modalUnique("healthpatient","url",t)}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]}}_bulkManagement(r=!0){return()=>{this._form.modalDocs(r?[]:this.rows).then(i=>{if(r)for(let e of i)this._preCreate(e),this._healthpatientService.create(e);else{for(let e of this.rows)i.find(n=>n._id===e._id)||this._healthpatientService.delete(e);for(let e of i){let n=this.rows.find(s=>s._id===e._id);n?(this._core.copy(e,n),this._healthpatientService.update(n)):(this._preCreate(e),this._healthpatientService.create(e))}}})}}_preCreate(r){delete r.__created}static{this.\u0275fac=function(i){return new(i||o)(a(v),a(w),a(_),a(g),a(u))}}static{this.\u0275cmp=h({type:o,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Patients",3,"columns","config","rows"]],template:function(i,e){i&1&&d(0,"wtable",0),i&2&&p("columns",e.columns)("config",e.config)("rows",e.rows)},dependencies:[C],encapsulation:2})}}return o})();var M=[{path:"",component:b}],B=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=m({type:o})}static{this.\u0275inj=l({imports:[f.forChild(M),y]})}}return o})();export{B as PatientsModule};
