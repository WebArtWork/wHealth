import{e as k}from"./chunk-WDW6KDBE.js";import{K as r,L as p,M as d,R as f,Sa as y,Wa as _,X as u,bb as v,hb as g,ib as C,ob as w,r as c,s as m,vb as S,xb as b}from"./chunk-STQM5VJK.js";var I={formId:"healthanalysis",title:"Healthanalysis",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill healthanalysis title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill healthanalysis description"},{name:"Label",value:"Description"}]}]};var M=(()=>{class s extends C{constructor(){super({name:"healthanalysis"}),this.healthanalysiss=this.getDocs(),this.healthanalysissByAuthor={},this.get(),this.filteredDocuments(this.healthanalysissByAuthor)}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var h=(()=>{class s{get rows(){return this._healthanalysisService.healthanalysiss}constructor(e,t,i,o,n,A){this._translate=e,this._healthanalysisService=t,this._alert=i,this._form=o,this._core=n,this._router=A,this.patient_id=this._router.url.includes("analysis/")?this._router.url.replace("/analysis/",""):"",this.columns=["name","description"],this.form=this._form.getForm("healthanalysis",I),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(a,l)=>{this._preCreate(a),this._healthanalysisService.create(a),l()}})},update:a=>{this._form.modal(this.form,[],a).then(l=>{this._core.copy(l,a),this._healthanalysisService.update(a)})},delete:a=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this healthanalysis?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._healthanalysisService.delete(a)}}]})},buttons:[{icon:"assignment",hrefFunc:a=>"/records/"+a.patient+"/analysis/"+a._id},{icon:"cloud_download",click:a=>{this._form.modalUnique("healthanalysis","url",a)}}],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]},this._page=1,this.setRows()}setRows(e=this._page){this._page=e,this._core.afterWhile(this,()=>{this._healthanalysisService.get({page:e,query:this._query()}).subscribe(t=>{this.rows.splice(0,this.rows.length),this.rows.push(...t)})},250)}_bulkManagement(e=!0){return()=>{this._form.modalDocs(e?[]:this.rows).then(t=>{if(e)for(let i of t)this._preCreate(i),this._healthanalysisService.create(i);else{for(let i of this.rows)t.find(o=>o._id===i._id)||this._healthanalysisService.delete(i);for(let i of t){let o=this.rows.find(n=>n._id===i._id);o?(this._core.copy(i,o),this._healthanalysisService.update(o)):(this._preCreate(i),this._healthanalysisService.create(i))}}})}}_preCreate(e){delete e.__created,this.patient_id&&(e.patient=this.patient_id)}_query(){let e="";return this.patient_id&&(e+=(e?"&":"")+"patient="+this.patient_id),e}static{this.\u0275fac=function(t){return new(t||s)(r(w),r(M),r(g),r(b),r(v),r(y))}}static{this.\u0275cmp=p({type:s,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","Analysis",3,"columns","config","rows"]],template:function(t,i){t&1&&u(0,"wtable",0),t&2&&f("columns",i.columns)("config",i.config)("rows",i.rows)},dependencies:[S],encapsulation:2})}}return s})();var F=[{path:"",component:h},{path:":patient_id",component:h}],z=(()=>{class s{static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275mod=d({type:s})}static{this.\u0275inj=m({imports:[_.forChild(F),k]})}}return s})();export{z as AnalysisModule};
