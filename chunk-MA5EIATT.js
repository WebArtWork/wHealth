import{a as S,b as F}from"./chunk-62X7VECZ.js";import{e as K}from"./chunk-WDW6KDBE.js";import{$ as c,A as E,Da as N,Db as J,Ea as L,H as a,K as m,L as C,M as O,P as j,Qa as R,R as f,T as _,Ta as V,V as o,W as s,Wa as B,X as T,_ as H,aa as k,bb as Y,da as x,f as g,hb as $,ia as l,ja as D,ka as q,ob as z,pa as A,qb as G,s as M,x as I,xb as b,y as P}from"./chunk-STQM5VJK.js";var U=(()=>{class n{constructor(e,i,t,r,d){this._translate=e,this._healthrecordService=i,this._alert=t,this._form=r,this._core=d,this.load=new E,this.form=this._form.getForm("record",S)}update(e){this._form.modal(this.form,[],e).then(i=>{this._core.copy(i,e),this._healthrecordService.update(e);let t=this._healthrecordService.doc(e._id);this._core.copy(i,t)})}delete(e){this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this healthpatient?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>g(this,null,function*(){this._healthrecordService.delete(e).subscribe(()=>{this.load.emit()})})}]})}static{this.\u0275fac=function(i){return new(i||n)(m(z),m(F),m($),m(b),m(Y))}}static{this.\u0275cmp=C({type:n,selectors:[["app-history"]],inputs:{record:"record"},outputs:{load:"load"},standalone:!1,decls:7,vars:3,consts:[[3,"routerLink"],[1,"documents__description"],[1,"material-icons",3,"click"]],template:function(i,t){i&1&&(o(0,"a",0)(1,"div",1),l(2),s()(),o(3,"span",2),c("click",function(){return t.update(t.record)}),l(4,"edit"),s(),o(5,"span",2),c("click",function(){return t.delete(t.record)}),l(6,"delete"),s()),i&2&&(x("routerLink","/onepatienthistory/",t.record._id,""),a(2),D(t.record.name))},dependencies:[V],encapsulation:2})}}return n})();var ne=()=>["Symptom","Analysis","Disease","Treatment"];function re(n,w){if(n&1&&(o(0,"div")(1,"span"),l(2),s()()),n&2){let e=k();a(2),q("sorted by ",e.type,"")}}function oe(n,w){if(n&1){let e=H();o(0,"div",17)(1,"app-history",18),c("load",function(){I(e);let t=k();return P(t.load())}),s()()}if(n&2){let e=w.$implicit;a(),f("record",e)}}var W=(()=>{class n{constructor(e,i,t){this._healthrecordService=e,this._route=i,this._form=t,this.records=[],this.patient_id="",this.type="",this.form=this._form.getForm("record",S),this._previousSelectedType=void 0,this.isMenuOpen=!1,this._route.paramMap.subscribe(r=>{this.patient_id=r.get("patient_id")||"",this.load()})}load(){this._healthrecordService.get({page:1,query:this._query()}).subscribe(e=>{this.records.splice(0,this.records.length),this.records.push(...e)})}create(){let e={name:"",description:"",diagnosis:"",result:"",treatmentType:"",allergy:""},i=()=>{e.name="",e.description="",e.diagnosis="",e.result="",e.treatmentType="",e.allergy="";let t=this._form.getComponent(this.form,"name"),r=this._form.getComponent(this.form,"description"),d=this._form.getComponent(this.form,"diagnosis"),p=this._form.getComponent(this.form,"result"),h=this._form.getComponent(this.form,"treatmentType"),u=this._form.getComponent(this.form,"allergy");t.hidden=!0,r.hidden=!0,d.hidden=!0,p.hidden=!0,h.hidden=!0,u.hidden=!0};this._form.modal(this.form,{label:"Create",click:(t,r)=>g(this,null,function*(){r(),this._preCreate(t),this._healthrecordService.create(t).subscribe(()=>{this.load()}),i()})},e,t=>{let r=t.type,d=this._form.getComponent(this.form,"diagnosis"),p=this._form.getComponent(this.form,"result"),h=this._form.getComponent(this.form,"treatmentType"),u=this._form.getComponent(this.form,"allergy"),y=this._form.getComponent(this.form,"name"),v=this._form.getComponent(this.form,"description"),X=()=>{e.name="",e.description="",e.diagnosis="",e.result="",e.treatmentType="",e.allergy=""};switch(r!==this._previousSelectedType&&(X(),this._previousSelectedType=r),r){case"Symptom":y.hidden=!1,v.hidden=!1,d.hidden=!0,p.hidden=!0,h.hidden=!0,u.hidden=!0;break;case"Analysis":y.hidden=!1,v.hidden=!1,d.hidden=!1,p.hidden=!1,h.hidden=!0,u.hidden=!0;break;case"Disease":y.hidden=!1,v.hidden=!1,d.hidden=!1,p.hidden=!1,h.hidden=!1,u.hidden=!1;break;case"Treatment":y.hidden=!1,v.hidden=!1,d.hidden=!0,p.hidden=!1,u.hidden=!0,h.hidden=!1;break}})}_query(){let e="";return this.patient_id&&(e+=(e?"&":"")+"patient="+this.patient_id),this.type&&(e+=(e?"&":"")+"type="+this.type),e}_preCreate(e){delete e.__created,this.patient_id&&(e.patient=this.patient_id),this.type&&(e.type=this.type)}static{this.\u0275fac=function(i){return new(i||n)(m(F),m(R),m(b))}}static{this.\u0275cmp=C({type:n,selectors:[["ng-component"]],standalone:!1,decls:19,vars:14,consts:[[1,"documents-wrapper"],[1,"documents-container"],[1,"documents-list"],[1,"burger-wrap",3,"click"],[1,"burger"],[1,"documents-sidebar"],[1,"documents-sidebar-content"],[1,"documents-sidebar__img"],["src","assets/default.png","alt",""],[1,"documents-sidebar__title"],[1,"documents-sidebar__description"],[3,"click"],[3,"modelChange","items","placeholder","clearable"],[1,"documents-main"],[1,"documents-main-content"],[4,"ngIf"],["class","documents-main-row",4,"ngFor","ngForOf"],[1,"documents-main-row"],[3,"load","record"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c("click",function(){return t.isMenuOpen=!t.isMenuOpen}),T(4,"div",4),s(),o(5,"div",5)(6,"div",6)(7,"div",7),T(8,"img",8),s(),o(9,"div",9),l(10," Title of sidebar... "),s(),o(11,"div",10)(12,"wbutton",11),c("click",function(){return t.create()}),l(13,"Create"),s(),o(14,"wselect",12),c("modelChange",function(d){return t.type=d,t.load()}),s()()()(),o(15,"div",13)(16,"div",14),j(17,re,3,1,"div",15)(18,oe,2,1,"div",16),s()()()()()),i&2&&(_("documents-wrapper--open",t.isMenuOpen),a(3),_("burger-wrap--open",t.isMenuOpen),a(),_("burger--close",t.isMenuOpen),a(),_("documents-sidebar--open",t.isMenuOpen),a(9),f("items",A(13,ne))("placeholder","Type")("clearable",!0),a(3),f("ngIf",t.type),a(),f("ngForOf",t.records))},dependencies:[J,N,L,G,U],encapsulation:2})}}return n})();var se=[{path:":patient_id",component:W}],we=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=O({type:n})}static{this.\u0275inj=M({imports:[B.forChild(se),K]})}}return n})();export{we as PatienthistoryModule};
